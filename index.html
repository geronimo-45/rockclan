<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RockClan Records</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Crect width='128' height='128' rx='24' fill='%23222236'/%3E%3Cpath d='M82 30 56 64l26 34-18 0-26-34 26-34z' fill='%23ff6a00'/%3E%3C/svg%3E">

  <!-- React / ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Rechartsê°€ ê¸°ëŒ€í•˜ëŠ” ì™¸ë¶€ ì˜ì¡´ì„± -->
  <script src="https://cdn.jsdelivr.net/npm/prop-types@15.8.1/prop-types.min.js"></script>
  <!-- ì•ˆì • CDNì˜ Recharts UMD -->
  <script src="https://cdn.jsdelivr.net/npm/recharts@2.12.0/umd/Recharts.min.js"></script>

  <style>
    :root{ --bg1:#0b0710;--bg2:#14050a;--accent:#ff6a00;--muted:#a7a0a8;--card:rgba(255,255,255,0.03); }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic',sans-serif;margin:0;color:#eee;background:linear-gradient(180deg,var(--bg1),var(--bg2));}
    header{padding:20px;text-align:center;background:linear-gradient(90deg,rgba(255,255,255,0.02),rgba(0,0,0,0.06));box-shadow:0 6px 30px rgba(0,0,0,0.5)}
    header h1{margin:0;color:var(--accent)}
    header .sub{color:var(--muted);font-size:13px;margin-top:6px}
    nav{display:flex;gap:10px;justify-content:center;padding:10px;background:#14141a;position:sticky;top:0;z-index:2}
    nav button{background:#1a1a22;border:1px solid #232532;color:#ddd;padding:10px 14px;border-radius:10px;cursor:pointer}
    nav button.active{background:var(--accent);color:#111}
    main{max-width:1100px;margin:18px auto;padding:0 16px}
    section{display:none}
    section.active{display:block}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);margin-bottom:16px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,0.06);text-align:center}
    th{color:var(--muted);font-size:12px;text-transform:uppercase}
    tr:hover{background:rgba(255,255,255,0.03)}
    .tier-Stone{color:#8b8b8b}.tier-Bronze{color:#cd7f32}.tier-Silver{color:#c0c0c0}.tier-Gold{color:#ffd700}.tier-Diamond{color:#67e8f9}.tier-Legend{color:#ff7f50}
    .muted{color:var(--muted)}
    .filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
    .filters > *{flex:1 1 160px}
    .rank-badge{background:#252532;border:1px solid #2f3140;border-radius:8px;padding:2px 8px;font-weight:700;display:inline-block;margin-right:6px}
    .note{font-size:12px;color:#aaa;margin-top:6px}
    .match{border:1px solid rgba(255,255,255,0.08);padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);margin-bottom:10px;cursor:pointer}
    .details{display:none;margin-top:8px;font-size:14px;color:#ddd}
    .details.active{display:block}
  </style>
</head>

<body>
  <header>
    <h1>RockClan Records</h1>
    <div class="sub">í´ëœì› ë­í‚¹ â€¢ ê¸°ë¡ì‹¤ â€¢ ELO ì„¤ëª… â€¢ ë³€ë™ ê·¸ë˜í”„</div>
  </header>

  <nav>
    <button class="tab active" data-tab="players">í´ëœì› ë­í‚¹</button>
    <button class="tab" data-tab="records">ê¸°ë¡ì‹¤</button>
    <button class="tab" data-tab="elo-info">ELO ì‹œìŠ¤í…œ ì„¤ëª…</button>
    <button class="tab" data-tab="chart">ELO ë³€ë™ ê·¸ë˜í”„</button>
  </nav>

  <main>
    <section id="players" class="active">
      <div class="card">
        <h2 style="margin:6px 0;color:var(--accent)">í´ëœì› ë­í‚¹</h2>
        <div class="filters">
          <input id="search" placeholder="id ê²€ìƒ‰" style="padding:10px;border-radius:8px;border:1px solid #2c2f3a;background:#101018;color:#fff">
          <select id="raceFilter" style="padding:10px;border-radius:8px;border:1px solid #2c2f3a;background:#101018;color:#fff">
            <option value="">ì¢…ì¡± ì „ì²´</option><option>Protoss</option><option>Terran</option><option>Zerg</option><option>Random</option>
          </select>
          <select id="tierFilter" style="padding:10px;border-radius:8px;border:1px solid #2c2f3a;background:#101018;color:#fff">
            <option value="">í‹°ì–´ ì „ì²´</option><option>Stone</option><option>Bronze</option><option>Silver</option><option>Gold</option><option>Diamond</option><option>Legend</option>
          </select>
        </div>
        <div class="muted" style="font-size:13px;margin-bottom:6px">ì „ì²´ ì¸ì›, ì¢…ì¡±/í‹°ì–´, í˜„ì¬ ELO, ìŠ¹ë¥ (%) â€” <span id="counts"></span></div>
        <table id="players-table">
          <thead><tr><th>Rank</th><th>ID</th><th>ì¢…ì¡±</th><th>í‹°ì–´</th><th>ELO</th><th>ìŠ¹</th><th>íŒ¨</th><th>ìŠ¹ë¥ </th></tr></thead>
          <tbody></tbody>
        </table>
        <div class="note">* ìŠ¹/íŒ¨/ìŠ¹ë¥ ì€ ê¸°ë¡ì‹¤(match)ì„ ê¸°ë°˜ìœ¼ë¡œ ìë™ ì¬ê³„ì‚°ë©ë‹ˆë‹¤.</div>
      </div>
    </section>

    <section id="records">
      <div class="card">
        <h2 style="margin:6px 0;color:var(--accent)">ê¸°ë¡ì‹¤ (í´ë¦­í•˜ì—¬ ì ‘ê¸°/í¼ì¹˜ê¸°)</h2>
        <div id="match-list"></div>
      </div>
    </section>

    <section id="elo-info">
      <div class="card">
        <h2 style="margin:6px 0;color:var(--accent)">ELO ì‹œìŠ¤í…œ ì„¤ëª…</h2>

        <p style="line-height:1.6;color:#ddd">
          RockClanì˜ ELO ì‹œìŠ¤í…œì€ ë‹¨ìˆœí•œ ì ìˆ˜ ì°¨ì´ë¿ ì•„ë‹ˆë¼ <b>í‹°ì–´(Tier) ë³´ì •</b>ì„ í¬í•¨í•˜ì—¬ ì‹¤ì œ ì‹¤ë ¥ ê²©ì°¨ë¥¼ ë°˜ì˜í•©ë‹ˆë‹¤.<br>
          ëª¨ë“  ê³„ì‚°ì€ ê¸°ë¡ì‹¤(match) ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™ ìˆ˜í–‰ë©ë‹ˆë‹¤.
        </p>

        <ul style="line-height:1.8;color:#ccc;margin-left:12px">
          <li><b>ì´ˆê¸° ELO</b>: ì‹ ê·œ í”Œë ˆì´ì–´ëŠ” 1000ì ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.</li>
          <li><b>K ê°’</b>:
            <ul>
              <li>ê°œì¸ì „(1:1): <b>K = 12</b></li>
              <li>íŒ€ì „(2:2, 3:3, 4:4 ë“±): <b>K = 8</b></li>
            </ul>
          </li>
          <li><b>í‹°ì–´ ì¸ë±ìŠ¤ ë³´ì •</b>:
            <ul>
              <li>Stone=0, Bronze=1, Silver=2, Gold=3, Diamond=4, Legend=5</li>
              <li>ì‹¤ì œ ê³„ì‚°ì€ <code>EffectiveElo = ELO + (TierIndex Ã— 40)</code> ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.</li>
            </ul>
          </li>
          <li>ì˜ˆìƒ ìŠ¹ë¥ ì€ ë‘ í”Œë ˆì´ì–´ì˜ <b>EffectiveElo</b> ì°¨ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</li>
          <li>ê²½ê¸° ê²°ê³¼ëŠ” ì˜ˆìƒ ìŠ¹ë¥  ëŒ€ë¹„ ì‹¤ì œ ìŠ¹íŒ¨ ì°¨ì´ë§Œí¼ ELOê°€ ë³€ë™í•©ë‹ˆë‹¤.</li>
        </ul>

        <h3 style="margin-top:16px;color:var(--accent)">ğŸ“ˆ ELO ê³„ì‚° ì˜ˆì‹œ</h3>
        <table style="width:100%;border-collapse:collapse;margin-top:8px;font-size:14px;color:#ddd">
          <thead>
            <tr style="background:rgba(255,255,255,0.05)">
              <th style="padding:6px;border:1px solid rgba(255,255,255,0.1)">ìƒí™©</th>
              <th style="padding:6px;border:1px solid rgba(255,255,255,0.1)">ELO ì°¨ì´</th>
              <th style="padding:6px;border:1px solid rgba(255,255,255,0.1)">í‹°ì–´ ì°¨ì´</th>
              <th style="padding:6px;border:1px solid rgba(255,255,255,0.1)">ì˜ˆìƒ ìŠ¹ë¥ </th>
              <th style="padding:6px;border:1px solid rgba(255,255,255,0.1)">ìŠ¹ë¦¬ ì‹œ</th>
              <th style="padding:6px;border:1px solid rgba(255,255,255,0.1)">íŒ¨ë°° ì‹œ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:6px;border:1px solid rgba(255,255,255,0.1)">1:1 (ë™í‹°ì–´, ë™ì¼ ELO)</td>
              <td>0</td><td>0</td><td>50%</td><td>+6</td><td>âˆ’6</td>
            </tr>
            <tr>
              <td style="padding:6px;border:1px solid rgba(255,255,255,0.1)">Silver(2) vs Gold(3), ë™ì </td>
              <td>0</td><td>+1</td><td>46%</td><td>+7</td><td>âˆ’5</td>
            </tr>
            <tr>
              <td style="padding:6px;border:1px solid rgba(255,255,255,0.1)">Gold(3) vs Silver(2), ë™ì </td>
              <td>0</td><td>âˆ’1</td><td>54%</td><td>+5</td><td>âˆ’7</td>
            </tr>
            <tr>
              <td style="padding:6px;border:1px solid rgba(255,255,255,0.1)">íŒ€ì „ (í‰ê·  ë™í‹°ì–´)</td>
              <td>0</td><td>0</td><td>50%</td><td>+4</td><td>âˆ’4</td>
            </tr>
            <tr>
              <td style="padding:6px;border:1px solid rgba(255,255,255,0.1)">íŒ€ì „ (ìƒëŒ€íŒ€ í‰ê·  Diamondâ†‘)</td>
              <td>âˆ’150</td><td>+2</td><td>32%</td><td>+6</td><td>âˆ’3</td>
            </tr>
          </tbody>
        </table>

        <p style="margin-top:10px;color:#999">
          â€» ELO ê³„ì‚°ì‹: <code>NewElo = OldElo + K Ã— (Actual âˆ’ Expected)</code><br>
          â€» í‹°ì–´ ì¸ë±ìŠ¤ ë³´ì •ìœ¼ë¡œ ì¸í•´ ìƒìœ„ í‹°ì–´ë¥¼ ì´ê¸¸ ê²½ìš° ìƒìŠ¹í­ì´ ë” ì»¤ì§‘ë‹ˆë‹¤.
        </p>
      </div>
    </section>

    <section id="chart">
      <div class="card">
        <h2 style="margin:6px 0;color:var(--accent)">ELO ë³€ë™ ê·¸ë˜í”„</h2>
        <div class="muted">ê³„ì‚°ëœ match ê¸°ë°˜ ELO ë³€í™” ê·¸ë˜í”„ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.</div>
      </div>
    </section>
  </main>

<script>
  // íƒ­ ì „í™˜
  document.querySelectorAll('nav .tab').forEach(btn=>{
    btn.addEventListener('click', e=>{
      document.querySelectorAll('nav .tab').forEach(b=>b.classList.remove('active'));
      e.currentTarget.classList.add('active');
      document.querySelectorAll('main section').forEach(s=>s.classList.remove('active'));
      document.getElementById(e.currentTarget.dataset.tab).classList.add('active');
    });
  });

  // ë°ì´í„° ë¡œë“œ
  function start(){
    const safeLoad=url=>fetch(url,{cache:'no-cache'})
      .then(r=>r.ok?r.json():{players:[],matches:[]})
      .catch(()=>({players:[],matches:[]}));

    Promise.all([safeLoad('data.json'),safeLoad('data_oct.json')])
      .then(([base,oct])=>{
        base.matches=(base.matches||[]).concat(oct.matches||[]);
        const seen=new Set((base.players||[]).map(p=>p.id));
        (oct.players||[]).forEach(p=>{if(!seen.has(p.id))base.players.push(p);});
        renderAll(base);
      })
      .catch(e=>console.error('ë¡œë“œ ì‹¤íŒ¨',e));
  }

  // í‹°ì–´ ì¸ë±ìŠ¤ (ë³´ì •ìš©)
  const getTierIndex=t=>{
    const order=['Stone','Bronze','Silver','Gold','Diamond','Legend'];
    return Math.max(0,order.indexOf(t));
  };

  function renderAll(data){
    const tbody=document.querySelector('#players-table tbody');
    const s=document.getElementById('search');
    const rf=document.getElementById('raceFilter');
    const tf=document.getElementById('tierFilter');

    // í†µê³„ & ELO
    const stat=new Map();
    const ensure=id=>stat.get(id)||stat.set(id,{played:0,win:0,loss:0,elo:1000,tier:'Silver',race:'Protoss'}).get(id);

    // ELO ë³€ë™ ì´ë ¥ (ê·¸ë˜í”„ìš©)
    const eloHistory={};
    const pushHistory=(id,elo)=>{
      if(!eloHistory[id]) eloHistory[id]=[elo];
      else eloHistory[id].push(elo);
    };

    const calcEloChange=(A,B,result,isTeam)=>{
      const K=isTeam?8:12;
      const effA=A.elo+getTierIndex(A.tier)*40;
      const effB=B.elo+getTierIndex(B.tier)*40;
      const expectedA=1/(1+Math.pow(10,(effB-effA)/400));
      const delta=K*(result-expectedA);
      A.elo+=delta; B.elo-=delta;
    };

    // ë§¤ì¹˜ ë°˜ì˜
    for(const m of data.matches){
      if(m.map==='Match') continue;

      // ê°œì¸ì „
      if(m.player1&&m.player2){
        const p1=ensure(m.player1), p2=ensure(m.player2);
        const w=m.winner;
        if(w===m.player1){calcEloChange(p1,p2,1,false);p1.win++;p2.loss++;}
        else if(w===m.player2){calcEloChange(p1,p2,0,false);p2.win++;p1.loss++;}
        p1.played++; p2.played++;
        pushHistory(m.player1, p1.elo);
        pushHistory(m.player2, p2.elo);
        continue;
      }

      // íŒ€ì „
      if(Array.isArray(m.team1)&&Array.isArray(m.team2)){
        const team1=m.team1.map(id=>ensure(id));
        const team2=m.team2.map(id=>ensure(id));
        const winners=Array.isArray(m.winner)?m.winner:[];
        const win1=winners.some(id=>m.team1.includes(id))?1:0;

        const avg1=team1.reduce((a,b)=>a+b.elo,0)/team1.length;
        const avg2=team2.reduce((a,b)=>a+b.elo,0)/team2.length;
        const avgTier1=team1.reduce((a,b)=>a+getTierIndex(b.tier),0)/team1.length;
        const avgTier2=team2.reduce((a,b)=>a+getTierIndex(b.tier),0)/team2.length;
        const eff1=avg1+avgTier1*40, eff2=avg2+avgTier2*40;
        const exp1=1/(1+Math.pow(10,(eff2-eff1)/400));
        const K=8, delta=K*(win1-exp1);

        team1.forEach(p=>{p.elo+=delta; (win1?p.win++:p.loss++); p.played++; pushHistory(p.id,p.elo);});
        team2.forEach(p=>{p.elo-=delta; (!win1?p.win++:p.loss++); p.played++; pushHistory(p.id,p.elo);});
      }
    }

    // ë­í‚¹ í…Œì´ë¸” ë Œë”ë§
    const renderTable=()=>{
      if(!tbody) return;
      tbody.innerHTML='';
      const kw=(s.value||'').toLowerCase(), race=rf.value, tier=tf.value;
      const rows=[...stat.keys()].map(id=>{
        const sdata=stat.get(id);
        // playersì—ì„œ race/tier ìˆìœ¼ë©´ ì±„íƒ
        const meta=data.players.find(p=>p.id===id)||{};
        return {id, race: meta.race||sdata.race, tier: meta.tier||sdata.tier, ...sdata};
      }).sort((a,b)=>b.elo-a.elo)
        .filter(p=>(!kw||p.id.toLowerCase().includes(kw))&&(!race||p.race===race)&&(!tier||p.tier===tier));

      rows.forEach((p,i)=>{
        const wr=p.played?((p.win/p.played)*100).toFixed(1)+'%':'-';
        const tr=document.createElement('tr');
        tr.innerHTML=`
          <td><span class="rank-badge">${i+1}</span></td>
          <td>${p.id}</td>
          <td>${p.race}</td>
          <td class="tier-${p.tier}">${p.tier}</td>
          <td>${Math.round(p.elo)}</td>
          <td>${p.win}</td>
          <td>${p.loss}</td>
          <td>${wr}</td>`;
        tbody.appendChild(tr);
      });
      const counts=document.getElementById('counts');
      if(counts) counts.textContent = `${rows.length}ëª…`;
    };
    s.addEventListener('input',renderTable);
    rf.addEventListener('change',renderTable);
    tf.addEventListener('change',renderTable);
    renderTable();

    // ê¸°ë¡ì‹¤ ë Œë”ë§
    const list=document.getElementById('match-list');
    if(list){
      list.innerHTML='';
      // ë‚ ì§œ ê¸°ì¤€ ì •ë ¬ í›„ ê°„ë‹¨ ê·¸ë£¹(í—¤ë” 'Match' ê³ ë ¤)
      const matches=[...data.matches].sort((a,b)=>String(a.date).localeCompare(String(b.date)));
      let grpDate=null, grpIdx=0, box=null, det=null;

      const openGroup=(date, header)=>{
        grpIdx = (grpDate===date)?(grpIdx+1):1;
        grpDate = date;
        box=document.createElement('div'); box.className='match';
        const head=document.createElement('div');
        if(header){
          const w=Array.isArray(header.winner)?header.winner.join(', '):(header.winner||'-');
          const score=header.score||'-';
          head.innerHTML=`<b>${date}</b> | Match ${grpIdx} | ìŠ¹ì: ${w} | ìŠ¤ì½”ì–´: ${score}`;
        }else{
          head.innerHTML=`<b>${date}</b> | Match ${grpIdx}`;
        }
        det=document.createElement('div'); det.className='details';
        box.appendChild(head); box.appendChild(det);
        box.addEventListener('click',()=>det.classList.toggle('active'));
        list.appendChild(box);
      };

      let header=null;
      for(const m of matches){
        if(m.map==='Match'){ header=m; openGroup(m.date, header); continue; }
        if(grpDate!==m.date){ header=null; openGroup(m.date, header); }
        const row=document.createElement('div');
        let s=`â€¢ ${m.map||'-'} â€” `;
        if(Array.isArray(m.team1)&&Array.isArray(m.team2)) s+=`${m.team1.join(', ')} vs ${m.team2.join(', ')}`;
        else if(m.player1&&m.player2) s+=`${m.player1} vs ${m.player2}`;
        s+=` | ìŠ¹ì: ${Array.isArray(m.winner)?m.winner.join(', '):(m.winner||'-')}`;
        if(m.score) s+=` | ìŠ¤ì½”ì–´: ${m.score}`;
        row.textContent=s;
        det.appendChild(row);
      }
    }

    // ê·¸ë˜í”„ ë Œë”
    renderEloChart(eloHistory);
  }

  // ELO ë³€ë™ ë©€í‹° ë¹„êµ ê·¸ë˜í”„
  function renderEloChart(eloHistory){
    const container=document.getElementById("chart");
    if(!container) return;
    let mount=document.getElementById("eloChartMount");
    if(!mount){
      mount=document.createElement("div");
      mount.id="eloChartMount";
      mount.style.marginTop="10px";
      container.querySelector(".card")?.appendChild(mount);
    }
    mount.innerHTML=`
      <div style="display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap;">
        <div>
          <div style="font-size:13px;color:#aaa;margin-bottom:6px">ë¹„êµí•  í”Œë ˆì´ì–´ ì„ íƒ (Ctrl/âŒ˜ ë¡œ ë‹¤ì¤‘ ì„ íƒ)</div>
          <select id="eloPlayerSelect" multiple size="10"
            style="min-width:220px;height:200px;padding:10px;border-radius:8px;border:1px solid #2c2f3a;background:#101018;color:#fff;">
            ${Object.keys(eloHistory).sort().map(id=>`<option value="${id}">${id}</option>`).join("")}
          </select>
        </div>
        <div id="eloChartArea" style="flex:1;min-width:320px;width:100%;height:460px"></div>
      </div>
    `;

    const {LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer} = window.Recharts || {};
    if(!LineChart){
      document.getElementById("eloChartArea").innerHTML =
        `<div style='color:#f66'>âš ï¸ Recharts ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</div>`;
      return;
    }

    const palette=["#ff6a00","#4ade80","#60a5fa","#f472b6","#facc15","#38bdf8","#a78bfa","#fb923c","#22d3ee","#94a3b8"];
    function draw(selectedIds){
      const area=document.getElementById("eloChartArea");
      if(!selectedIds||selectedIds.length===0){
        area.innerHTML=`<div class="muted">ì™¼ìª½ ëª©ë¡ì—ì„œ 1ëª… ì´ìƒ ì„ íƒí•˜ë©´ ë¹„êµ ê·¸ë˜í”„ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>`;
        return;
      }
      const maxLen=Math.max(...selectedIds.map(id=>(eloHistory[id]?.length||0)));
      const rows=Array.from({length:maxLen},(_,i)=>{
        const row={game:i};
        selectedIds.forEach(id=>{row[id]=(eloHistory[id]||[])[i]??null;});
        return row;
      });
      ReactDOM.render(
        React.createElement(
          ResponsiveContainer,{width:"100%",height:460},
          React.createElement(
            LineChart,{data:rows,margin:{top:20,right:30,left:0,bottom:0}},
            React.createElement(CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.12)"}),
            React.createElement(XAxis,{dataKey:"game",stroke:"#aaa",tick:{fontSize:12}}),
            React.createElement(YAxis,{stroke:"#aaa",tick:{fontSize:12}}),
            React.createElement(Tooltip,{contentStyle:{backgroundColor:"#1a1a22",border:"1px solid #333"}}),
            React.createElement(Legend,null),
            ...selectedIds.map((id,idx)=>
              React.createElement(Line,{
                key:id,type:"monotone",dataKey:id,name:id,
                stroke:palette[idx%palette.length],dot:false,strokeWidth:2,isAnimationActive:false
              })
            )
          )
        ),document.getElementById("eloChartArea"));
    }

    const select=document.getElementById("eloPlayerSelect");
    select.addEventListener("change",()=>{
      const selected=Array.from(select.selectedOptions).map(o=>o.value);
      draw(selected);
    });
  }

  start();
</script>
</body>
</html>
